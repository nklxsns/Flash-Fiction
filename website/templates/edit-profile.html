<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Edit Profile</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="{{url_for('static',filename ='css/profile-styles.css')}}"
    />
  </head>
  <body>
    <div
      class="container d-flex justify-content-center align-items-center"
      style="flex-direction: column"
    >
      <form
        action="/edit-profile/{{ user.id }}"
        style="width: 60vw"
        method="POST"
      >
        <div class="avatar-upload">
          <div class="avatar-edit">
            <input type="file" id="imageUpload" accept=".png, .jpg, .jpeg" />
            <label for="imageUpload"></label>
          </div>
          <div class="avatar-preview">
            <div
              id="imagePreview"
              style="background-image: url(../static/images/img3.jpg)"
            ></div>
          </div>
        </div>

        <div
          class="input-text d-flex justify-content-center"
          style="flex-direction: column"
        >
          <label for="username">Username</label>
          <input type="text" name="username" id="new-username" value="{{ user.username }}" required/>
          <label for="bio">Bio</label>
          <input type="text" name="bio" id="new-bio" value="{{ user.bio }}" required/>
        </div>

        <div class="my-3" style="color: red">
          {% with messages = get_flashed_messages() %} {% if messages %}
          <ul>
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
          </ul>
          {% endif %} {% endwith %}
        </div>

        <button
          class="pushable"
          style="margin-top: 20px"
          type="submit"
          onclick="return validate()"
        >
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front"> Save </span>
        </button>
      </form>
    </div>

    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js
    "></script>

    <script>
      function validate() {
        new_bio = document.getElementById("new-bio");
        new_username = document.getElementById("new-username");

        if (new_username.value.trim() == "") {
          alert("Username cannot be empty.");
        } else if (new_bio.value.trim() == "") {
          alert("Bio cannot be empty.");
        } else {
          return true;
        }

        return false;
      }
    </script>
  </body>
</html>
